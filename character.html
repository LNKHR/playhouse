<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="shortcut icon" type="image/png" href="/favicon.png"/>
  <title>Playhou.se</title>

  <!-- Bootstrap CDN -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"
    integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">

  <!-- Toyhou.se Theme -->
  <link href="./toyhouse_themes/night.css" title="thThemes" id="thThemes" rel="stylesheet" type="text/css" />
  <link href="./playhouse.css" rel="stylesheet" type="text/css" />

</head>

<body id="main">
  <div class="clearfix container-fluid p-0">
    <div class="row no-gutters flex-nowrap">
      <div class="bg-faded" id="codeEditor">
        <div class="bonk">
          <div class="row flex-nowrap no-gutters p-1 align-items-center options">

            <!-- Switch -->
            <div class="col-auto p-1">
              <a href="/user.html" class="btn btn-primary d-block" title="Switch to User" data-toggle="tooltip" data-placement="right"><i class="fas fa-exchange"></i></a>
            </div>

            <!-- Theme Options -->
            <div class="col p-1">
              <form>
                <select class="form-control" id="thCSSThemes">
                  <option selected value="./toyhouse_themes/night.css">Night</option>
                  <option value="./toyhouse_themes/default.css">Default</option>
                  <option value="./toyhouse_themes/pink.css">Pink</option>
                  <option value="./toyhouse_themes/teal.css">Teal</option>
                  <option value="./toyhouse_themes/bee.css">Bee</option>
                  <option value="./toyhouse_themes/velvet.css">Velvet</option>
                </select>
              </form>
            </div>

            <!-- Editor Options -->
            <div class="col p-1">
              <select class="form-control" id="editorThemes">
                <option selected value="ace/theme/tomorrow_night">Dark Editor</option>
                <option value="ace/theme/chrome">Light Editor</option>
              </select>
            </div>

            <!-- Copy -->
            <div class="col-auto p-1 hidden-sm-down">
              <button class="btn btn-default d-block" title="Toggle Sidebar" data-toggle="tooltip"
                data-placement="bottom" onclick="sidebarToggle()"><i class="fas fa-adjust"></i></button>
            </div>

            <!-- Copy -->
            <div class="col-auto p-1">
              <button class="btn btn-default d-block" title="Copy HTML" data-toggle="tooltip" data-placement="right"
                onclick="copyToClipboard()"><i class="fas fa-clipboard"></i></button>
            </div>

          </div>
          <textarea id="html"></textarea>
        </div>
      </div>
      <div class="resizer bg-secondary p-1 hidden-sm-down"></div>

      <!-- Render Area -->
      <div class="col" style="overflow: hidden !important;">

        <!-- Navbar -->
        <nav class="navbar navbar-toggleable-sm navbar-inverse header" data-topbar="" role="navigation" id="header">
          <a class="navbar-brand" href="/index.html">PLAYHOU.SE</a>
        </nav>

        <!-- Mobile Menu -->
        <div class="hidden-md-up nav-mobile-menu">
          <button class="btn btn-outline-secondary nav-mobile-menu-toggle" onclick="offCanvas()" data-target="#">
            Menu <span class="fa fa-caret-right"></span>
          </button>
        </div>

        <!-- Main Content -->
        <div id="main" class="clearfix container-fluid">
          <div class="row" style="min-height: calc(100vh - 55px)">

            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 sidebar" id="sidebar">
              <ul class="side-nav list-unstyled">
                <li class="header"><i class="fa fa-heart mr-2"></i> Character</li>
                <li class="user-name">
                  <span class="display-user">
                    <a href=""><img src="/favicon.png" class="display-user-avatar">
                      <span class="display-user-username">user</span>
                    </a>
                  </span>
                </li>
                <li class="character-folder subheader">
                  <a href=""><i class="mr-1 fa fa-folder"></i>All Characters</a>
                </li>
                <li class="character-name">
                  <span class="display-character"><a href="">
                    <img src="/favicon.png" class="mr-2">Character</a>
                  </span>
                </li>
                <li class="divider sidebar-divider-collections"></li>
                <li class=" sidebar-li-gallery"><a href=""><i class="far fa-image fa-fw sidebar-icon"></i>Gallery</a></li>
                <li class=" sidebar-li-library"><a href=""><i class="fa fa-book fa-fw sidebar-icon"></i>Library</a></li>
                <li class=" sidebar-li-worlds"><a href=""><i class="fa fa-globe fa-fw sidebar-icon"></i>Worlds</a></li>
                <li class=" sidebar-li-links"><a href=""><i class="fa fa-link fa-fw sidebar-icon"></i>Links</a></li>
                <li class="divider sidebar-divider-interactions"></li>
                <li class="sidebar-li-favorites hide" data-id="" data-url="" th-favorite="0" data-trigger="focus" tabindex="-1">
                  <a href="#" class="favorited"><i class="fa fa-star fa-fw sidebar-icon"></i>Unfavorite
                    <span class="pull-right sidebar-stat sidebar-stat-favorites th-favorite-count" data-id=""></span>
                  </a>
                </li>
                <li class="sidebar-li-favorites " data-id="" data-url="" th-favorite="1">
                  <a href="#"><i class="far fa-star fa-fw sidebar-icon"></i>Favorite 
                    <span class="pull-right sidebar-stat sidebar-stat-favorites th-favorite-count" data-id=""></span>
                  </a>
                </li>
                <li class="divider sidebar-divider-ownership"></li>
                <li class=" sidebar-li-ownership"><a href=""><i class="far fa-check-square fa-fw sidebar-icon"></i>Ownership</a></li>
                <li class="divider sidebar-divider-mod"></li>
                <li class="sidebar-li-report"><a href=""><i class="fa fa-exclamation-triangle fa-fw sidebar-icon"></i>Report</a></li>
                <li class="sidebar-li-block"><a href="" th-modal-trigger=""><i class="fa fa-ban fa-fw sidebar-icon"></i>Block</a></li>
              </ul>
            </div>

            <!-- Main Content -->
            <div class="col-sm-12 col-md-9 col-lg-10 content-main" id="content">
              <div class="character-profile">

                <div class="row profile-header">

                  <div class="col-lg-6 col-12 profile-section profile-name-section">
                    <div class="img-thumbnail">
                      <img src="/favicon.png"
                        class="profile-name-icon">
                    </div>
                    <div class="profile-name-info">
                      <h1 class="display-4">Character</h1>
                      <h2><span class="display-user"><a href=""><i class="fa fa-user mr-1" style="font-size:14px;"></i>user</a></span></h2>
                    </div>
                  </div>


                  <div class="col-lg-6 col-12 profile-section profile-info-section">
                    <div class="card">
                      <div class="card-block bg-faded">
                        <div class="profile-info-title hidden-lg-up">
                          <h2>Info</h2>
                          <hr>
                        </div>
                        <div class="profile-info-content row">
                          <div class="profile-stats-content  col-12">
                            <dl class="fields">
                              <div class="row fields-field">
                                <dt class="field-title col-sm-4">
                                  Created
                                </dt>
                                <dd class="field-value col-sm-8">
                                  <abbr class="tooltipster datetime small">
                                    <script> document.write(new Date().toLocaleDateString()); </script>
                                  </abbr>
                                </dd>
                              </div>
                              <div class="row fields-field">
                                <dt class="field-title col-sm-4">
                                  Creator
                                </dt>
                                <dd class="field-value col-sm-8">
                                  <span class="display-user"><a href=""><i class="fa fa-user mr-1" style="font-size:10px;"></i>user</a></span>
                                </dd>
                              </div>
                              <div class="row fields-field">
                                <dt class="field-title col-sm-4">
                                  Favorites
                                </dt>
                                <dd class="field-value col-sm-8"><a href="" th-modal-trigger="">127</a></dd>
                              </div>
                            </dl>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>



                <div class="profile-section profile-content-section ">
                  <div class="profile-content-title">
                    <h2>Profile</h2>
                    <hr>
                  </div>
                  <div class="profile-content-content user-content fr-view">
                    <div class="user-profile" id="code"></div>
                  </div>
                </div>


                <div class="profile-section profile-gallery-section">
                  <div class="profile-gallery-title">
                    <h2>Recent Images
                      <hr>
                    </h2>
                  </div>
                  <div class="profile-gallery-content">
                    <p class="image-gallery-none">No images.</p>
                  </div>
                </div>

              </div>
            </div>

          </div>
        </div>

        <!-- Footer -->
        <div class="text-muted text-center p-3 footer">
          This is a live compiler for Toyhou.se HTML Layouts!<br>
          <a class="mx-2" href="https://toyhou.se/">Toyhou.se</a>
          <a class="mx-2" href="">Bookmark on TH</a>
          <a class="mx-2" href="https://ko-fi.com/cheeriko">Support Me</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"
    integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n"
    crossorigin="anonymous"></script>
  <script type="text/javascript"
    src="https://rawgit.com/RickStrahl/jquery-resizable/master/src/jquery-resizable.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"
    integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"
    integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn"
    crossorigin="anonymous"></script>

  <!-- Font Awesome -->
  <script src="https://kit.fontawesome.com/a3d06f1529.js" crossorigin="anonymous"></script> <!-- test kit -->
  <script src="https://kit.fontawesome.com/734cc6a413.js" crossorigin="anonymous"></script>

  <!-- Ace Editor -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ace.js"></script>

  <!-- Dah JS -->
  <script src="/playhouse.js"></script>
  <script type="text/javascript">

    /* Change Theme
    ========================================================== */
    (function newTheme() {
      var savedTheme = localStorage.getItem("theme");
      document.querySelector(`[value='${savedTheme}']`).setAttribute("selected", "true");
      setStyleSource("#thThemes", savedTheme);
    })();

    document.getElementById("thCSSThemes").addEventListener("change", function () {
      var selected = this.options[this.selectedIndex].value;
      setStyleSource("#thThemes", selected);
      localStorage.setItem("theme", selected);
    });

    (function setCssEditor() {
      var savedEditor = localStorage.getItem("cssEditor");
      document.querySelector(`[value='${savedEditor}']`).setAttribute("selected", "true");
      editor.setTheme(savedEditor);
    })();

    document.getElementById("editorThemes").addEventListener("change", function () {
      var selected = this.options[this.selectedIndex].value;
      editor.setTheme(selected);
      localStorage.setItem("cssEditor", selected);
    });

    /* Compile HTML 
    ========================================================== */
    let compile = () => {
      editor.addEventListener('change', function () {
        let code = document.getElementById("code");
        var text = editor.getValue();
        localStorage.setItem("html", text);
        code.innerHTML = text;
      });
      window.onload = () => {
        var savedText = localStorage.getItem("html") || "";
        code.innerHTML = savedText;
        editor.session.setValue(savedText);
      };
    }

    compile();

    /* Copy to Clipboard
    ========================================================== */
    function copyToClipboard() {
      const str = editor.getValue();
      const el = document.createElement('textarea');
      el.value = str;
      el.setAttribute('readonly', '');
      el.style.position = 'absolute';
      el.style.left = '-9999px';
      document.body.appendChild(el);
      el.select();
      document.execCommand('copy');
      document.body.removeChild(el);
    }

  </script>

</body>

</html>